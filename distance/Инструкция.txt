Версия программы 31
На гитхабе может быть более новая: https://github.com/Yonisen/WarThunder_Map_Marker_Finder

Если у вас монитор не поддерживается, то напишите в дискорде Yonisen#3035 
добавлю поддержку вашего монитора


Подготовка:

Установите на компьютер:
Python 3.10.6
	https://www.python.org/ftp/python/3.10.6/python-3.10.6-amd64.exe
	!!!вначале установки поставьте галочку "add python.exe to PATH"

Двойным кликом запустите файл из папки distance "install.py"
Откроется консоль, дождитесь завершения установки, консоль сама закроется

Вышеперечисленные действия нужно сделать только один раз
Теперь программа готова к работе


Настройка ВарТандера:

Поставьте разрешение игры: полноэкранное окно (настройки-графика:режим)
Установите размер миникарты 133% (самый большой) (настройки-основныеПараметры-танковыеБоевНастройки:размерТактическойКарты)
Назначьте кнопку для желтой метки (управление-общее:целеуказаниеДляОтряда)
Теперь вартандер настроен

Настройка программы:

Перейдите в папку distance
Запустите скрипт "settings.py" двойным кликом
Выберите подходящее разрешение экрана и
назначьте комбинации для замера дальности и выставки масштаба или оставьте значения по умолчанию (t и Ctrl+N),
также, если хотите, можете поменять позиционирование и прозрачность оверлея
После этого сохраните изменения, нажав "Apply"
Рекомендую для замера дальности использовать ту же кнопку, что и для желтой метки

(пример строки для клавиатуры:
					замер дистанции = <ctrl>+<alt>+<shift>+k+f)
(примеры строки для мышки:
					замер дистанции мышь = left
					выставка масштаба мышь = middle)

Если вы не уверены, как правильно прописать нужную вам кнопку мыши, то
запустите скрипт testMouse.py двойным кликом и понажимайте эту кнопку
он напишет вам ее правильное обозначение
Если хотите вернуть значения по умолчанию, нажмите "Default"

Как запускать дальномер?

Перейдите в папку distance

Двойным кликом запустите питон скрипт "miniKarta.py"
Откроется консоль, где через некоторое время должна появится надпись: "Программа ожидает сочетания клавиш"
Эта надпись свидетельствует об успешном запуске скрипта

Все готово к работе

Когда в тундре попадаете на новую карту, посмотрите масштаб миникарты в правом нижнем углу
Нажмите сочетание клавиш для выставки масштаба (по умолчанию Ctrl+N)
Откроется окно с масштабом карты
сравните значение в строке "м.число" с реальным масштабом карты
если значения отличаются, нажмите Alt, чтобы увидеть курсор в игре
кликните по черному квадрату на оверлее и перепишите число с миникарты (ограничение 4 цифры)
после этого нажмите на кнопку "масштаб"
значение в строке "м.число" изменится
После этого советую закрыть окно масштаба

Теперь можно замерить дистанцию
Наведитесь на точку, до которой хотите замерить дистанцию
(наводиться можно из прицела, из бинокля и от третьего лица)
Поставьте желтую метку и нажмите клавишу для замера дальности (по умолчанию t)
Эти действия можно назначить на одну и ту же кнопку
Дистанция появится дополнительным временным оверлеем (на 7 секунд)


На этом гайд по работе с программой закончен, далее подробности


Иногда будет случаться так, что у вас на экране появится надпись:
"Твой танк не найден" или "Метка не найдена"
Это свидетельствует о том, что нейросеть не смогла найти
Требуемый объект на миникарте
Это значит, что нейросети нужны еще данные для дообучения
И они у вас есть
Если заглянете в папку distance/not_found
Вы сможете найти все случаи ложных срабатываний, которые произошли
Пока вы пользовались программой
Когда у вас накопится достаточный набор данных
Вы можете отправить их мне, и я дообучу уже существующую нейросеть
Чтобы больше она не ошибалась в подобных ситуациях

Возможно в очень редких случаях
Вы увидите стандартное отображение дистанции и азимута
Которые по какой-то причине очевидно неверны
Проще понять это по азимуту, например, не 190 градусов, а 350
В таком случае, для выявления ошибки, сверните игру
Откройте папку distance, там вы увидете временный скриншот
"Map.png", это тот скриншот, по которому программа замеряла дальность
Так же, в консоли после каждого замера сохраняются результаты
Скопируйте данные крайнего измерения в блокнот
И скопируйте скриншот
В отдельную папку
После этого можно разобраться из-за чего произошла ошибка
Для этого нужно открыть файл "Map.png" в Paint
И проверить правильность координат
Позиция танка из консоли - это центр треугольника на скриншоте
Центр желтого маркера и так понятно
Далее координаты букв
Эти буквы находятся на скриншоте слева, такой столбец, как в морском бое
Проверяете координаты левых верхних углов тех,
Что использованы для рассчета масштаба
Если был неправильный замер дистанции, то где-то должно быть
несоответствие между скриншотом и консолью
Найдя это несоответствие, можно будет понять в чем ошибка
И подправить скрипт




Интересные особенности:
Иногда, особенно когда ваш танк расположен не горизонтально
А наклонен в какую-то сторону, азимут на оверлее начинает, вроде бы "пиздеть"
Он пишет 262,4 а на компасе в тундре видно 261,9
Так вот это не оверлей пиздит
Если положите ваш танк на бок, то ахуеете от того, что компас размазался по всему экрану
Об этом можете не беспокоится, точность замера дистанции не зависит от наклона вашего танка

Но стоит заметить, когда вы выезжаете за пределы миникарты, метка вашего танка меняется
и не выходит за пределы миникарты, хотя вы можете довольно далеко выехать
Дальность, в таком случае, считается как обычно, по треугольной метке на миникарте
А точность зависит от того, как далеко вы уехали от центра этой метки
Если вы отъехали от края карты на 100 метров, то ваше удаление от центра треугольной метки, будет примерно 120-140 метров
То есть, если замер дальности покажет 900 метров, то реальнная дальность 1020-1040 метров

Данный дальномер имеет погрешность, обусловленную не абсолютной точность распознавания двух объектов на миникарте
(желтая метка и треугольник вашего танка) двумя нейросетями. Погрешность предположительно 3-4 пикселя
Что на экранах fullHD дает разброс +-20 метров вне зависимости от дистанции
(Танк в 100 метрах от вас, дальномер может показать 80, танк в 1000 метрах от вас, дальномер может показать 1020)
Этого может быть не достаточно, чтобы накидывать снаряды с AVRE на 3 километра в корпус танка
(Дело в излишней "параболичности" траектории снаряда в этом случае. Когда он прилетает сверху вниз, эти 20 метров могут превратиться в промах)
(Но если снаряд летить более менее прямо, и прилетает в цель как бы сбоку, вертикальное окно для попадания в танк, может достигать 100 метров)
(Подумайте сами, когда противник недалеко от вас, метров 300, вы можете нацелиться на него отметкой 100 или 500 на прицеле, и все равно
отметка будет в пределах силуэта танка и вы попадете)
Также свою неточность вносит тот факт, что дальномер работает не с большой картой, а с миникартой
Основная цель данного дальномера в том, чтобы дать игрокам
На всяких 34-ках, шерманах, КВ-2
Возможность быстро замерить дистанцию и сделать выстрел

Весь процесс построен на скриншотах и оверлее

По поводу скорости замера дистанции:
Когда вы жмете на кнопку
Желтая метка появляется на экране не сразу
На моем компьютере она появляется через 200-250 мс
Я не знаю чем это вызвано, вычислительными мощностями моего компьютера или еще чем
Поэтому я поставил таймаут в свою программу (на 300 мс), чтобы она не делала скриншот раньше времени
Если на вашем компьютере вы когда-нибудь заметите, что поставили желтую метку в очевидном месте,
а программа вам напишет, что метка не найдена
Сообщите мне, я увеличу таймаут 
Если у вас мощный комп и вы хотите попробовать уменьшить задержку
То открывайте файл "miniKarta.py" с помощью редактора кода (Notepad++) и меняйте строку, где написано: time.sleep(0.3)

Также стоит отметить, если вы начинаете замер дистанции и при этом удерживаете постороннюю клавишу
Например W, для движения вперед, и после замера дальности вы до сих пор не отпустили эту клавишу
Тогда ее эффект аннулируется, то есть танк останавливается, будто клавиша не нажата
Это происходит потому, что во время выполнения скрипта, фокус с окна вартандера на мгновение пропадает

Также стоит учитывать, что дистанция на оверлее ближе всего к действительности, если вы с противником
находитесь на одной высоте, если же противник выше или ниже вас, то дистанция будет немного занижена
по сравнению с реальностью

